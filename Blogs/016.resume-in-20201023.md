---
title: Unity面试总结(20201023)
date: 2020-10-23T17:22:56+08:00
draft: false
isCJKLanguage: true
categories:
 - 面试
tags:
 - 面试
 - Unity
---

## 大型上市公司的一个工作室

###  前言

当时的工作想要离职的原因主要是觉得写UI和做Lua boy没前途，于是打算早点跑路，当然待遇不高和团队不成熟也是其中一部分原因。



### 简单的总结

笔试题 + 主程面 + （似乎是）leader面，没有HR面试。笔试题很简单，面试反倒是问了特别多的东西，我一下子可能记不全。

薪资待遇还好，和我转行前最后一份工作的薪资差别不大。最后面试官也坦言，给我待遇高一点，希望我能待久一些，可以和团队有深度的磨合，但一年内不会再有涨薪。我觉得还好，就接受了。

已拿到offer，~~希望能在这里把一款游戏做上线吧。~~

  > 待了两个星期996顶不住，跑到另外一家小作坊做TPS战斗去了，待遇没变



### 笔试题：

- **[lua]给出下面表达式的输出是什么**

  ```
  print(type(type))
  print(type(true))
  print(type(nil))
  print("10" + 1)
  ```

  > 其实我一个都不知道，只知道`print(type(xxx))`会打印类型字符串，比如`table`，这些题目比较奇怪，我现场瞎猜着写的



- **[lua]pairs和ipars区别**

  略



- **[lua]请写一个可变参数的函数**

  略



- **[C++]static有什么用途**

  静态属性或者方法，不用实例化的属性和方法

  函数中的静态变量，相当于全局变量



- **[C++]局部变量能否和全局变量重名？**

  不知道，我现场瞎猜的可以。瞎猜的根据是`python`之类的语言可以重名



- **冒泡排序算法的时间复杂度是什么？**

  `O(n^2)`



- **哈希表查询的时间复杂度是什么?解决冲突的方式有哪些？**

  复杂度`O(1)`

  调整散列函数的实现，比如引入素数

  > 解决哈希冲突的方法一般有：开放定址法、链地址法（拉链法）、再哈希法、建立公共溢出区等方法
  >
  > 1. 开放定址法
  >
  >    也称再散列法，基本思想是：当关键字key的hash地址 `p = H(key)`出现冲突时，以`p`为基础，产生另一个哈希地址`p1`，如果`p1`仍然冲突，再以`p`为基础产生另一个哈希地址`p2`，直到找出一个不冲突的哈希地址`pi`，将相应元素存入其中。这种方法有一个通用的再散列函数形式：
  >    $$
  >    H_i = (H(key) + d_i) \% m_i = 1,2,...,n
  >    $$
  >
  >    其中`H(key)`为哈希函数，m为表长，di称为增量序列。增量序列的取值方式不同，相应的再散列方式也不同。主要有以下三种：
  >
  >    - 线性探测再散列
  >    - 二次探测再散列
  >    - 伪随机探测再散列
  >
  > 2. 链地址发
  >
  >    这种方法的基本思想是将所有哈希地址为`i`的元素构成一个称为同义词链的单链表，并将单链表的头指针存在哈希表的第`i`个单元中，因俄日查找、插入和删除主要在同义词链中进行。链地址法适用于经常进行插入和删除的情况。
  >
  > 3. 再哈希法
  >
  >    这种方法是同时构造多个不同的哈希函数，当哈希地址
  >    $$
  >    H_i = RH_1(key)
  >    $$
  >    发生冲突时，再计算
  >    $$
  >    H_i = RH_2(key)
  >    $$
  >    直到不再产生冲突。这种方法不易产生聚集，但增加了计算时间。
  >
  > 4. 建立公共溢出区
  >
  >    这种方法的基本思想是：将哈希表分为基本表和溢出表两部分，凡是和基本表发生冲突的元素，一律填入溢出表。



- **线程和进程有哪些区别**

  略



- **使用mipmap有什么好处和坏处？什么情况下使用？**

  写的 “暂时没听说过mipmap”

  > 其实这是材质相关的内容，我还没有接触过



- **[C]如何表示二叉树？**

  略



- **[语言不限]请编程实现一个冒泡排序算法**

  略



- **[语言不限]写一个程序，以递归方式反序输出一个字符串。eg:给定字符串"abc"输出"cba"**

  略



> 笔试题大概15分钟就答完了。
>
> 回过头来看，除了哈希表部分可以好好讲一下之外，其他都很简单（后面的面试也反复的在聊哈希……）



### 面试过程一：

- **简单的介绍一下我自己**

   略

   

- **在现在的公司做了些什么工作：**

  我在现在的公司里会比较主动的承担一些事情，所以做的东西也还算比较多的吧
   - 重构了背包的实现
   - 重构了Lua侧的代码架构，提升写复杂页面的效率
   - 实现热更下载框架
   - 搭建`gitlab & subgit`推广`git`的使用

  

- **仔细问了一下重构背包、重构`lua`架构、热更下载框架的实现细节**

  略

  

- **为什么这么短的时间就离职（3个月）**

  觉得写UI和做 lua boy 没前途，于是打算早点跑路，当然待遇不高和团队不成熟也是其中一部分原因。

  > 其实也会觉得所在的团队技术不太行，代码架构缺少的东西比较多（Lua侧架构是我重构的，异步热更下载框架也是我写的）。

  

- **自学Unity有没有遇到过什么困难？**

   我对协程和`async/await`编程模型花了一段时间才真正弄明白它们的运行模型，也详细讲了一下我对这两部分的理解。

   > 协程其实本质是一个迭代器，每个协程中的`yield return`相当于一次迭代结束（会把当前协程挂起），去执行下一个协程的迭代（唤起下一个协程）。所以很多时候多个协程都是在一个线程里执行的，因此协程也常被称为是一种用户态的并发编程技术。
   > 至于Unity里协程是否会分多个线程并行执行、一帧会执行多少次迭代，我也坦言还没有研究到这个程度。

   > `async/await`本质是一个语法糖，配合`Task<T>`降低多线程编程的复杂度。
   >
   > 需要介绍一下`Task<T>`：最深处的不可分割的`Task<T>`应当是在另一个线程执行的函数（可以是CPU计算，也可以是IO等待，而且经由`Task<T>`封装的线程会默认的使用线程池），`await`等待`Task<T>`的时候，实际上将函数分为两半，前面一半直接在`await`的时候就返回了，`await`后面的函数体会被编译成回调函数，在`Task<T>`异步执行结束后调用。
   >
   >  `async`声明一个函数是一个可以支持这种异步编程的函数，`await`调用这种`async`异步声明的函数，并且在编译阶段智能的判断：如果是普通函数则同步执行；函数中有真正的开启了新线程的`Task<T>`（比如`Task.Run()`）则会变成像前面说的那样，函数会在异步执行后回调`await`之后的函数体。

   > 关于异步编程时候的异步等待IO是如何提升CPU响应性能的，我也还有一些疑惑，毕竟还是会有个线程会在那里等待，只不过不是主线程了。似乎要深入操作系统的部分了，再接再厉吧。

   

- **C++中的`Map`和`HashMap`底层有什么区别？**
  
  C++的这两个我不是很清楚，不过我讲述了一下哈希散列的思想（主要是以前大学时候用C语言写过简单的map的实现）
  
  > https://stackoverflow.com/questions/5139859/what-the-difference-between-map-and-hashmap-in-stl
  >
  > `Map`的底层是红黑树做的存储，所以元素有序的，插入删除是`O(log(n))`，元素需要实现 `operator<`
  >`HashMap`是用哈希函数实现的，所以元素是无序的，插入删除是`O(1)`，元素需要实现`operator==`，而且需要一个哈希函数
  
  > 为啥Unity岗位要问C++的细节？事后想想比较奇怪。直接问散列和红黑树似乎也可以？（尽管红黑树我也不是很了解就是了）



### 面试过程二：

- **简单的寒暄了几句**

  这段时间我错认为面试官是HR，但他表明也是个程序，我猜应该是leader吧，不过没有明说。也借这个小误解打开了话匣子

  > 人与人之间打开话匣子真的就是那么一瞬间




- **关于职业规划方面是否有计划？**

  如实陈述自己的职业规划，分为短期目标和长期理想

  

- **向量的点乘叉乘几何意义**

  点乘的我回答出来了（求投影和夹角）
  叉乘的我没回答出来，而且还口嗨说会手算，结果没算出来😅，气氛一度十分尴尬（明明才看过不久的，居然忘掉了！）



- **现在的工作中是否接触过Lua中的类**

  没有

  不过我补充了一下，看了Lua官网的《Programming in Lua》电子书，有讲Lua的OOP，只是我目前的工作Lua侧还没有复杂到需要用到这块特性，就还没怎么实践过



- **看什么书学的C#？**

  我看的是微软官网的入门，然后需要什么就查什么，也阅读了一些开源的C#框架源码学到了一些技巧

  > 感觉面试官应该是想问有没有看过类似于《Effective C#》《CLR via C#》之类的书吧



- **进程和线程的区别，线程间通信和同步**

  - 进程和线程的区别回答得特别浅，仅停留在概念上
  
  - 线程间通信：
  
    > 我现场回答得比较乱，我直接跳过了说我可以回答进程间通信。
  
  - 进程间通信：
  
    > 管道，消息队列，共享内存（设备）、信号、信号量、socket套接字（我只回答出来了共享内存、信号、信号量）
    >
    > 其实这里可以细讲的东西很多，我现场讲得其实比较乱，实在是很多年没有去了解这一块了
  
  - 线程间同步：
  
    > 我回答得也不好，只讲出了可以通过信号、共享内存和回调来实现线程间同步。也简单讲了一下C#的`async/await`线程间同步模型。



- **仔细的问了一下我第二份工作的工作内容（是我时间经历比较长的一段工作）**

  略



- **细问了关于面向对象**

  封装、继承、多态，而且更多的时候是因为需要多态，才有了封装和继承（后面这句是我口胡的）

  > ❗继续有被刨根问底：C++编译器是如何实现多态的？我不知道



- **❗委托可以委托静态函数或者成员函数吗？编译器是如何做到的**

  其实我没有想过为什么可以

  只是说成员函数在类中都是会有地址偏移的，将成员函数作为委托的时候是将实例的地址和成员函数的偏移作为地址来达到可以访问成员函数的实现的



- **❗委托可以委托参数不一样的函数吗？**

  又是我从来没有想过的问题。
  我回答是，如果参数签名完全不一样，那么是不可以的，如果参数之间可以做隐式转换，那么应该是可以的。

  继续被问：什么情况是可以隐式转换的呢？我回答的是继承了同一个父类或者同一个接口的都可以

  被面试官反问：你确定吗？……其实这都是我现场评直觉回答的，没有专门学习过相关的文档，我再花时间查一查相关资料吧



- **C#中的值类型**

  一般就是`int` `float` `char` `struct`这些了



- **C++中的模板特化和偏特化是什么**

  我不知道，听都没听过。不仅不知道答案，而且一脸懵逼：我不是来写C#或者Lua的么？



- **看我简历中有写“熟悉常见算法”，问我列举有哪些算法**

  其实我本意只是想表达一下我刷过算法题仅此而已，没想到面试官会让我背诵算法的名字

  想到什么就念了什么吧，主要是常见的排序和字符串匹配算法

  顺道问了数据结构，也都是很常见的列表、链表、map、queue、stack、tree等，都很简单



- **仔细的问了map的复杂度**

  > 这两个面试官怎么都这么喜欢问map，他们是最近聊天有battle过哪个map性能更好么，有点意外

  还是和上一个面试官差不多的回答



- **快速排序的时间复杂度**

  因为没背过这个，只是一边推算着一边回答的

  推算的思路是这样的：排序算法只有一个是`O(n)`的复杂度，基数排序/桶排序，其他的都是`O(n^2)`或者`O(nlogn)`，而带`logn`的特点在于是否有分而治之的过程，快排明显是有的



- **对我简历中关于"制定Lua开发规范"表示疑惑**

  面试官直说，一般都是让新人先在既有框架里写半年，之后再考虑让他提制定规范的事情，更别说我还是个转行的。

  其实我们项目的Lua侧代码本来啥规范也没有，一整个UI都塞一个Lua里，导致一个Lua文件接近两千行。团队主程对Lua也没有了解很深，应该也是才接触`Lua/xLua`不久，所以我写了一个月Lua + UI后，就顺其自然的有了一些想法，并且提出来实践了。效果也还不错。



- **我对公司有什么想要了解的？**

  - 主要是几个方面：团队规模怎样，团队是如何合作的，项目内容是什么，具体待遇

  - 关于团队是如何合作的这一块沟通的时候，我有点惊讶到，20+程序的团队用的是SVN做版本控制，我原本一直以为团队规模大了，基本上只有Git才能做好多人协作，没有想到这边SVN用得也一直没出问题，很惊讶于这边的团队管理，挺期待的。

  - 项目内容是MMORPG手游，面试官有演示Demo，我看到后还不自信的说了句“我能做出这样的游戏吗？资源优化这一块我没什么经验。”面试官说资源优化基本都是美术的事情，所以不用担心。能入职这种团队的话，我有种终于算是做正经游戏了的感觉（尽管游戏不确定好玩或者大卖）

  - 待遇方面聊得比较直白：给我比较高的待遇（相对于刚转行而言），但希望我能待久一点，与团队有比较好的磨合与合作。但一年内不再涨薪，一年半后再谈涨薪的事情。也坦言公司在交五险一金的时候是按照30%的薪水交的，会有点坑，但其他的没什么会坑的地方了。

  - > 工作时间是996，给自己的时间会比较少了。不过为了大项目背书，还是上吧！

  - > 我漏掉了问我入职后具体工作内容是啥，没有问得很具体。

  

- **其他**

  有聊到我在自学`shader`的事情，面试官建议道，`shader`岗位需求相对较少（这家公司20个程序只有两个`shader`，我还在职的公司团队甚至没有专职`shader`），而且`shader`到最后拼的是数学，他看我数学不太行，建议我还是不要太过于研究`shader`了，可以专注于做游戏玩法上。
  
  也坦言说觉得我技术面比较窄，这一点我还比较好奇，如果最后能入职，打算找个机会仔细问问具体是为什么。学无止境啊。

