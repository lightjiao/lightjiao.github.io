---
title: "游戏开发软件工程实践心得"
date: 2021-11-27T21:09:19+08:00
draft: false
isCJKLanguage: true
---



> ###  💡一家之言，记录分享



## 面向接口编程与接口抽象，不是一回事儿

  - 面向接口编程
      同事A开发载具UI，同事B开发载具的逻辑实现，这二者并不会同时开发。这时引入`IVehicleAdapter`接口，并且定好这个接口的方法以和输入输出，不管实现。这个时候同事A和同事B就可以分别去开发了，什么时候开发完都可以，只要两人保证接口的输入输出是符合预期的，就可以最后合并、测试。
  
      这看起来好像很普通，但这在日常开发中可以解决一个很大的问题：版本管理冲突，以及代码结构的可扩展性。同事之间互相覆盖代码太常见了，用面向接口编程解耦很重要，每个同学只需要关注自己负责的模块即可。	
	
      > 💡你甚至可以通过对接口的Mock做单元测试保证健壮性
      
  - 接口抽象
  
      虽然形式上也是声明接口，并且保证接口的输入输出是一样即可，但很多时候抽象只是为了使得可以写代码时候做对这个接口的类型转换。而这种方便做强制类型转换的操作，很多时候反而会造成代码的耦合，降低代码结构的扩展性（到处随便调用某个接口，或者随便实现某个接口）
  
       > 💡区分这二者的概念在游戏开发中很重要，游戏客户端的代码都在一个工程里，很多时候为了图方便，就抽象一个接口出来，然后到处实现，到处调用，美其名曰面向接口编程，但实际上这只会使得其他开发者面对到处实现的接口不知所措，很难下手扩展新功能。

## 如何减少版本管理时冲突？

  架构上保证，一个功能就是一个文件或者文件夹，功能模块之间的调用，用面向接口编程做解耦、拆分

  目前我很推崇`ECS`的那种架构，每个System都是独立的，开发过程中，一个System只有一个负责的同事，这样就不会造成System之间的合并冲突。而有些复杂的System内部实现，可能会有多个同事负责，则可以用面向接口编程来解耦

  > 不过ECS也有瑕疵，别的System可能会调整它的输入输出，导致对其他System的影响。这种System修改输入输出的事情，相当于面向接口编程的接口变了，这在游戏开发的中后期应该很少发生才对（我猜的），次数少就相对可控。

## 如何在游戏开发过程中让程序使用Git，而美术和策划使用SVN呢？

- 我实践过subgit

  > 自动同步SVN与git的操作一次部署，稳定使用，很爽
  >
  > 缺点就是subgit是个收费软件

- git-svn

  > 难用，git-svn是基于rebase命令，而unity本地常常会有mat和anim文件被运行时修改，导致rebase很麻烦，所以不是很好用

- 美术资产使用SVN，代码文件夹单独使用git

  > 未实践过，会出现SVN中的文件与git分支不匹配的问题，理论上可以通过优化工作流来解决，但在多版本开发的情况下的话，会比较麻烦
