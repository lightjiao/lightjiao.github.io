---
title: "ã€è½¬ã€‘æ·±å…¥ç†è§£DIPã€IoCã€DIä»¥åŠIoCå®¹å™¨"
date: 2022-01-15T16:18:19+08:00
draft: false
isCJKLanguage: true
---

> ğŸ’¡æœ¬æ–‡éåŸåˆ›ï¼Œè½¬è½½è‡ªï¼šhttps://asuka4every.top/DIP-IoC-DI-and-IoC-containers/

# æ·±å…¥ç†è§£DIPã€IoCã€DIä»¥åŠIoCå®¹å™¨

## æ‘˜è¦  

é¢å‘å¯¹è±¡è®¾è®¡(OOD,Object-Oriented Design)æœ‰åŠ©äºæˆ‘ä»¬å¼€å‘å‡ºé«˜æ€§èƒ½ã€æ˜“æ‰©å±•ä»¥åŠæ˜“å¤ç”¨çš„ç¨‹åº.
å…¶ä¸­OODæœ‰ä¸€ä¸ªé‡è¦çš„æ€æƒ³é‚£å°±æ˜¯ä¾èµ–å€’ç½®åŸåˆ™(DIP,Dependence Inversion Principle),å¹¶ç”±æ­¤å¼•ç”³å‡ºIoCã€DIä»¥åŠIoCå®¹å™¨ç­‰æ¦‚å¿µ.

## ç›®å½•

+ [å‰è¨€](##å‰è¨€)
+ [ä¾èµ–å€’ç½®åŸåˆ™(DIP)](##ä¾èµ–å€’ç½®åŸåˆ™(DIP))
+ [æ§åˆ¶åè½¬(IoC)](##æ§åˆ¶åè½¬(IoC))
+ [ä¾èµ–æ³¨å…¥(DI)](##ä¾èµ–æ³¨å…¥(DI))
+ [IoCå®¹å™¨](##IoCå®¹å™¨)
+ [æ€»ç»“](##æ€»ç»“)

## å‰è¨€

**ç®€å•æ¦‚å¿µ:**  
**ä¾èµ–å€’ç½®åŸåˆ™(DIP):**
ä¸€ç§è½¯ä»¶æ¶æ„è®¾è®¡çš„åŸåˆ™(æŠ½è±¡æ¦‚å¿µ)  
**æ§åˆ¶ç¿»è½¬(IoC):**
ä¸€ç§ç¿»è½¬æµã€ä¾èµ–å’Œæ¥å£çš„æ–¹å¼(DIPçš„å…·ä½“å®ç°æ–¹å¼)  
**ä¾èµ–æ³¨å…¥(DI):**
IoCçš„ä¸€ç§å®ç°æ–¹å¼,ç”¨æ¥åè½¬ä¾èµ–(IoCçš„å…·ä½“å®ç°æ–¹å¼)
**IoCå®¹å™¨:**
ä¾èµ–æ³¨å…¥çš„**æ¡†æ¶**,ç”¨æ¥æ˜ å°„ä¾èµ–,ç®¡ç†å¯¹è±¡åˆ›å»ºå’Œç”Ÿå­˜å‘¨æœŸ(DIæ¡†æ¶)  
![é™„å›¾ä¸€å¼ ](http://images2018.cnblogs.com/blog/51353/201807/51353-20180708133108552-1522595053.png)

## ä¾èµ–å€’ç½®åŸåˆ™(DIP)

**ä¾èµ–å€’ç½®åŸåˆ™,å®ƒè½¬æ¢äº†ä¾èµ–,é«˜å±‚æ¨¡å—ä¸ä¾èµ–äºä½å±‚æ¨¡å—çš„å®ç°,è€Œä½å±‚æ¨¡å—ä¾èµ–äºé«˜å±‚æ¨¡å—å®šä¹‰çš„æ¥å£.**  
é€šä¿—çš„è®²,å°±æ˜¯é«˜å±‚æ¨¡å—å®šä¹‰æ¥å£,ä½å±‚æ¨¡å—è´Ÿè´£å®ç°
>Bob Martinså¯¹DIPçš„å®šä¹‰:  
>é«˜å±‚æ¨¡å—ä¸åº”ä¾èµ–äºä½å±‚æ¨¡å—,ä¸¤è€…åº”è¯¥ä¾èµ–äºæŠ½è±¡.  
>æŠ½è±¡ä¸ä¸åº”è¯¥ä¾èµ–äºå®ç°,å®ç°åº”è¯¥ä¾èµ–äºæŠ½è±¡.  

---

### åœºæ™¯ä¸€ ä¾èµ–æ— å€’ç½®(ä½å±‚æ¨¡å—å®šä¹‰æ¥å£,é«˜å±‚æ¨¡å—è´Ÿè´£å®ç°)

![å›¾](https://images.cnblogs.com/cnblogs_com/liuhaorain/355410/o_low%20Level.png)  
ä»ä¸Šå›¾ä¸­,æˆ‘ä»¬å‘ç°é«˜å±‚æ¨¡å—çš„ç±»ä¾èµ–äºä½å±‚æ¨¡å—çš„æ¥å£.  
å› æ­¤,ä½å±‚æ¨¡å—éœ€è¦è€ƒè™‘åˆ°æ‰€æœ‰çš„æ¥å£.  
å¦‚æœæœ‰æ–°çš„ä½å±‚æ¨¡å—ç±»å‡ºç°æ—¶,é«˜å±‚æ¨¡å—éœ€è¦ä¿®æ”¹ä»£ç ,æ¥å®ç°æ–°çš„ä½å±‚æ¨¡å—çš„æ¥å£.  
è¿™æ ·,å°±ç ´åäº†å¼€æ”¾å°é—­åŸåˆ™.

### åœºæ™¯äºŒ ä¾èµ–å€’ç½®(é«˜å±‚æ¨¡å—å®šä¹‰æ¥å£,ä½å±‚æ¨¡å—è´Ÿè´£å®ç°)

![å›¾](https://images.cnblogs.com/cnblogs_com/liuhaorain/355410/o_High%20Level2.png)
åœ¨è¿™ä¸ªå›¾ä¸­,æˆ‘ä»¬å‘ç°é«˜å±‚æ¨¡å—å®šä¹‰äº†æ¥å£,å°†ä¸å†ç›´æ¥ä¾èµ–äºä½å±‚æ¨¡å—,ä½å±‚æ¨¡å—è´Ÿè´£å®ç°é«˜å±‚æ¨¡å—å®šä¹‰çš„æ¥å£.  
è¿™æ ·,å½“æœ‰æ–°çš„ä½å±‚æ¨¡å—å®ç°æ—¶,ä¸éœ€è¦ä¿®æ”¹é«˜å±‚æ¨¡å—çš„ä»£ç .  
ç”±æ­¤å¯ä»¥æ€»ç»“å‡ºä½¿ç”¨DIPçš„ä¼˜ç‚¹:
**ç³»ç»Ÿæ›´æŸ”éŸ§:**
å¯ä»¥ä¿®æ”¹ä¸€éƒ¨åˆ†ä»£ç è€Œä¸å½±å“å…¶ä»–æ¨¡å—.
**ç³»ç»Ÿæ›´å¥å£®:**
å¯ä»¥ä¿®æ”¹ä¸€éƒ¨åˆ†ä»£ç è€Œä¸ä¼šè®©ç³»ç»Ÿå¥”æºƒ.
**ç³»ç»Ÿæ›´é«˜æ•ˆ:**
ç»„ä»¶æ¾è€¦åˆ,ä¸”å¯å¤ç”¨,æé«˜å¼€å‘æ•ˆç‡.

## æ§åˆ¶åè½¬(IoC)  

+ DIPæ˜¯ä¸€ç§**è½¯ä»¶è®¾è®¡åŸåˆ™**,å®ƒä»…ä»…å‘Šè¯‰ä½ ä¸¤ä¸ªæ¨¡å—ä¹‹é—´åº”è¯¥å¦‚ä½•ä¾èµ–,ä½†æ˜¯å®ƒå¹¶æ²¡æœ‰å‘Šè¯‰ä½ å¦‚ä½•åš.  
+ IoCåˆ™æ˜¯ä¸€ç§**è½¯ä»¶è®¾è®¡æ¨¡å¼**,å®ƒå‘Šè¯‰ä½ åº”è¯¥å¦‚ä½•åš,æ¥è§£é™¤ç›¸äº’ä¾èµ–æ¨¡å—çš„è€¦åˆ.**æ§åˆ¶åè½¬(IoC),å®ƒä¸ºç›¸äº’ä¾èµ–çš„ç»„ä»¶æä¾›æŠ½è±¡,å°†ä¾èµ–(ä½å±‚æ¨¡å—)å¯¹è±¡çš„è·å¾—äº¤ç»™ç¬¬ä¸‰æ–¹(ç³»ç»Ÿ)æ¥æ§åˆ¶,å³ä¾èµ–å¯¹è±¡ä¸åœ¨è¢«ä¾èµ–æ¨¡å—çš„ç±»ä¸­ç›´æ¥é€šè¿‡*new*æ¥è·å–.**

> **è½¯ä»¶è®¾è®¡åŸåˆ™:** åŸåˆ™ä¸ºæˆ‘ä»¬æä¾›æŒ‡å—,å®ƒå‘Šè¯‰æˆ‘ä»¬ä»€ä¹ˆæ˜¯å¯¹,ä»€ä¹ˆæ˜¯é”™çš„.å®ƒä¸ä¼šå‘Šè¯‰æˆ‘ä»¬å¦‚ä½•è§£å†³é—®é¢˜.å®ƒä»…ä»…ç»™å‡ºä¸€äº›å‡†åˆ™,ä»¥ä¾¿æˆ‘ä»¬å¯ä»¥è®¾è®¡å¥½çš„è½¯ä»¶,é¿å…ä¸è‰¯çš„è®¾è®¡.ä¸€äº›å¸¸è§çš„åŸåˆ™,æ¯”å¦‚*DRY(Donâ€™t Repeat Yourself)ã€OCP(Open Closed Principle)ã€DIP(Dependency Inversion Principle)* ç­‰.  
> **è½¯ä»¶è®¾è®¡æ¨¡å¼:** æ¨¡å¼æ˜¯åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­æ€»ç»“å¾—å‡ºçš„ä¸€äº›å¯é‡ç”¨çš„è§£å†³æ–¹æ¡ˆ,å®ƒèƒ½è§£å†³ä¸€äº›å®é™…çš„é—®é¢˜.ä¸€äº›å¸¸è§çš„æ¨¡å¼,æ¯”å¦‚*å·¥å‚æ¨¡å¼ã€å•ä¾‹æ¨¡å¼* ç­‰ç­‰.

### å·²æ‰‹æœºä¸ºä¾‹

æ‰‹æœºç±»

```c#
public class iPhone6
{
    public void SendMessage()
    {
        Console.WriteLine("å‘é€ä¸€æ¡æ¶ˆæ¯");
    }
}
```

ä½¿ç”¨è€…ç±»

```c#
public class User
{
    private readonly iPhone6 phone = new iPhone6();

    public void SendMessage()
    {
        phone.SendMessage();
    }
}
```

æµ‹è¯•

``` c#
static void Main(string[] args)
{
    User user = new user();
    user.SendMessage();

    Console.Read();
}

```

---

é‚£ä¹ˆå¦‚æœæˆ‘æ‰‹æœºåäº†éœ€è¦æ¢æˆiPhoneXæ€ä¹ˆåŠ?

é‡æ–°å®šä¹‰ä¸€ä¸ªiPhoneXç±»

```c#
public class iPhoneX
{
    public void SendMessage()
    {
        Console.WriteLine("å‘é€ä¸€æ¡æ¶ˆæ¯");
    }
}
```

ç”±äºUserä¸­ç›´æ¥å¼•ç”¨çš„iPhone6è¿™ä¸ªç±»,æ‰€ä»¥è¿˜éœ€è¦ä¿®æ”¹å¼•ç”¨,æ›¿æ¢æˆiPhoneX

ä½¿ç”¨è€…ç±»

```c#
public class User
{
    private readonly iPhoneX phone = new iPhoneX();

    public void SendMessage()
    {
        phone.SendMessage();
    }
}
```

---

é‚£ä¹ˆå¦‚æœæˆ‘å†æ¬¡æ¢æ‰‹æœº?åˆéœ€è¦ä¿®æ”¹ä»£ç .

æ˜¾ç„¶,è¿™ä¸æ˜¯ä¸€ä¸ªè‰¯å¥½çš„è®¾è®¡,ç»„ä»¶ä¹‹é—´é«˜åº¦è€¦åˆ,å¯æ‰©å±•æ€§è¾ƒå·®,å®ƒè¿èƒŒäº†DIPåŸåˆ™.  
é«˜å±‚æ¨¡å—Userç±»ä¸åº”è¯¥ä¾èµ–äºä½å±‚æ¨¡å—iPhone6,iPhoneX,ä¸¤è€…åº”è¯¥ä¾èµ–äºæŠ½è±¡.  
IoCæœ‰2ç§å¸¸è§çš„å®ç°æ–¹å¼:ä¾èµ–æ³¨å…¥å’ŒæœåŠ¡å®šä½.  
å…¶ä¸­ä¾èµ–æ³¨å…¥(DI)ä½¿ç”¨æœ€ä¸ºå¹¿æ³›.  

## ä¾èµ–æ³¨å…¥(DI)  

æ§åˆ¶åè½¬(IoC)ä¸€ç§é‡è¦çš„æ–¹å¼,**å°±æ˜¯å°†ä¾èµ–å¯¹è±¡çš„åˆ›å»ºå’Œç»‘å®šè½¬ç§»åˆ°è¢«ä¾èµ–å¯¹è±¡ç±»çš„å¤–éƒ¨æ¥å®ç°.** åœ¨ä¸Šè¿°çš„å®åŠ›ä¸­,Userç±»æ‰€ä¾èµ–çš„å¯¹è±¡iPhone6çš„åˆ›å»ºå’Œç»‘å®šæ˜¯åœ¨Userç±»å†…éƒ¨è¿›è¡Œçš„.  
äº‹å®è¯æ˜,è¿™ç§æ–¹æ³•å¹¶ä¸å¯å–.  
æ—¢ç„¶,ä¸èƒ½å†Userç±»å†…éƒ¨ç›´æ¥ç»‘å®šä¾èµ–å…³ç³»,é‚£ä¹ˆå¦‚ä½•å°†iPhoneå¯¹è±¡çš„å¼•ç”¨ä¼ é€’ç»™Userç±»ä½¿ç”¨?  

ä¾èµ–æ³¨å…¥(DI,Dependency Injection),**å®ƒæä¾›ä¸€ç§æœºåˆ¶,å°†éœ€è¦ä¾èµ–(ä½å±‚æ¨¡å—)å¯¹è±¡çš„å¼•ç”¨ä¼ é€’ç»™è¢«ä¾èµ–(é«˜å±‚å¯¹è±¡)å¯¹è±¡** .é€šè¿‡DI,æˆ‘ä»¬å¯ä»¥åœ¨Userç±»çš„å¤–éƒ¨å°†iPhoneå¯¹è±¡çš„å¼•ç”¨ä¼ é€’ç»™Orderç±»å¯¹è±¡.

### æ–¹æ³•ä¸€æ„é€ å‡½æ•°æ³¨å…¥

æ„é€ å‡½æ•°å‡½æ•°æ³¨å…¥,é€šè¿‡æ„é€ å‡½æ•°ä¼ é€’ä¾èµ–.  
å› æ­¤,æ„é€ å‡½æ•°çš„å‚æ•°å¿…ç„¶ç”¨æ¥æ¥æ”¶ä¸€ä¸ªä¾èµ–å¯¹è±¡.  
é‚£ä¹ˆå‚æ•°çš„ç±»å‹æ˜¯ä»€ä¹ˆ?  
å…·ä½“ä¾èµ–å¯¹è±¡çš„ç±»å‹?  
è¿˜æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»å‹?  
æ ¹æ®DIPåŸåˆ™,æˆ‘ä»¬çŸ¥é“é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºä½å±‚æ¨¡å—,ä¸¤è€…åº”è¯¥ä¾èµ–äºæŠ½è±¡.  
é‚£ä¹ˆæ„é€ å‡½æ•°çš„å‚æ•°åº”è¯¥æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»å‹.  
å›åˆ°ä¸Šé¢çš„é—®é¢˜,å¦‚ä½•å°†iPhoneå¯¹è±¡çš„å¼•ç”¨ä¼ é€’ç»™Userç±»ä½¿ç”¨?  

---

é¦–å…ˆ,æˆ‘ä»¬è¦å®šä¹‰ä¸€ä¸ªiPhoneçš„æŠ½è±¡ç±»å‹IPhone,å¹¶å£°æ˜SendMessageæ–¹æ³•.

```c#
public interface IPhone
{
    void SendMessage();
}
```

ç„¶ååœ¨iPhone6ç±»ä¸­,å®ç°IPhoneæ¥å£.

```c#
public class iPhone6 : IPhone
{
    public void SendMessage()
    {
        Console.WriteLine("å‘é€æ¶ˆæ¯!");
    }
}
```

æ¥ä¸‹æ¥,æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹Userç±»

```c#
public class User
{
    private IPhone _iphone;

    public User(IPhone iPhone)
    {
        _iphone = iPhone;
    }

    public void SendMessage()
    {
        _iphone.SendMessage();
    }
}
```

æµ‹è¯•ä¸€ä¸‹

```c#
static void Main(string[] args)
{
    iPhone6 _iphone = new iPhone6();
    User _user = new User(_iphone);

    _user.SendMessage();

    Console.Read();
}
```

ä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡º,æˆ‘ä»¬å°†ä¾èµ–å¯¹è±¡iPhone6å¯¹è±¡çš„åˆ›å»ºå’Œç»‘å®šè½¬ç§»åˆ°Userç±»å¤–éƒ¨æ¥å®ç°.è¿™æ ·å°±è§£é™¤äº†iPhone6å’ŒUserç±»çš„è€¦åˆå…³ç³».  
å½“æˆ‘ä»¬æ¢æ‰‹æœºçš„æ—¶å€™,åªéœ€è¦é‡æ–°å®šä¹‰ä¸€ä¸ªiPhoneXç±»,ç„¶åå¤–éƒ¨é‡æ–°ç»‘å®š,ä¸éœ€è¦ä¿®æ”¹Userç±»å†…éƒ¨ä»£ç .  

å®šä¹‰iPhoneXç±»

```c#
public class iPhoneX : IPhone
{
    public void SendMessage()
    {
        Console.WriteLine("iPhoneXå‘é€æ¶ˆæ¯!");
    }
}
```

é‡æ–°ç»‘å®šä¾èµ–å…³ç³»:

```c#
static void Main(string[] args)
{
    iPhoneX _iphone = new iPhoneX();
    User _user = new User(_iphone);

    _user.SendMessage();

    Console.Read();
}
```

æˆ‘ä»¬ä¸éœ€è¦ä¿®æ”¹Userç±»çš„ä»£ç ,å°±å®Œæˆäº†æ¢æ‰‹æœºè¿™ä¸€æµç¨‹,æç°äº†IoCçš„ç²¾å¦™ä¹‹å¤„.

### æ–¹æ³•äºŒå±æ€§æ³¨å…¥  

å±æ€§æ³¨å…¥æ˜¯é€šè¿‡å±æ€§æ¥ä¼ é€’ä¾èµ–çš„,  
å› æ­¤æˆ‘ä»¬éœ€è¦åœ¨Userç±»ä¸­å®šä¹‰ä¸€ä¸ªå±æ€§:  

```c#
public class User
{
    private IPhone _iphone;

    public IPhone IPhone
    {
        set
        {
            _iphone = value;
        }

        get
        {
            return _iphone;
        }
    }

    public void SendMessage()
    {
        _iphone.SendMessage();
    }
}
```

æµ‹è¯•ä»£ç 

```c#
static void Main(string[] args)
{
    iPhone6 _iPhone = new iPhone6();

    User _user = new User();
    _user.IPhone = _iPhone;

    _user.SendMessage();

    Console.Read();
}
```

### æ–¹æ³•ä¸‰æ¥å£æ³¨å…¥

ç›¸æ¯”æ„é€ å‡½æ•°æ³¨å…¥å’Œå±æ€§æ³¨å…¥,æ¥å£æ³¨å…¥æ˜¾å¾—æœ‰äº›å¤æ‚,ä½¿ç”¨ä¹Ÿä¸å¸¸è§.  
å…·ä½“æ€è·¯æ˜¯å…ˆå®šä¹‰ä¸€ä¸ªæ¥å£,åŒ…å«ä¸€ä¸ªè®¾ç½®ä¾èµ–çš„æ–¹æ³•.  
ç„¶åä¾èµ–ç±»,ç»§æ‰¿å¹¶å®ç°è¿™ä¸ªæ¥å£.  

é¦–å…ˆå®šä¹‰ä¸€ä¸ªæ¥å£:

```c#
public interface IDependent
{
    // è®¾ç½®ä¾èµ–é¡¹
    void SetDependence(IPhone _iphone);
}
```

ä¾èµ–ç±»å®ç°è¿™ä¸ªæ¥å£:

```c#
public class User : IDependent
{
    private IPhone _iphone;

    public void SetDependence(IPhone _iphone)
    {
        this._iphone = _iphone;
    }

    public void SendMessage()
    {
        _iphone.SendMessage();
    }
}
```

é€šè¿‡SetDependence()æ–¹æ³•ä¼ é€’ä¾èµ–:

```c#
static void Main(string[] args)
{
    iPhone6 _iphone = new iPhone6();
    User _user = new User();
    _user.SetDependence(_iphone);

    _user.SendMessage();

    Console.Read();
}
```

## IoCå®¹å™¨  

å‰é¢æ‰€æœ‰çš„ä¾‹å­ä¸­,æˆ‘ä»¬éƒ½æ˜¯é€šè¿‡æ‰‹åŠ¨çš„æ–¹å¼æ¥åˆ›å»ºä¾èµ–å¯¹è±¡,å¹¶å°†å¼•ç”¨ä¼ é€’ç»™è¢«ä¾èµ–æ¨¡å—.  
æ¯”å¦‚:

```c#
iPhone6 iphone = new iPhone6();
User user = new User(iphone);
```

å¯¹äºå¤§å‹é¡¹ç›®æ¥è¯´,ç›¸äº’ä¾èµ–çš„ç»„ä»¶æ¯”è¾ƒå¤š.  
å¦‚æœè¿˜ç”¨æ‰‹åŠ¨çš„æ–¹å¼,è‡ªå·±æ¥åˆ›å»ºå’Œæ³¨å…¥ä¾èµ–çš„è¯,æ˜¾ç„¶æ•ˆç‡å¾ˆä½,è€Œä¸”å¾€å¾€è¿˜ä¼šå‡ºç°ä¸å¯æ§çš„åœºé¢.
æ­£å› å¦‚æ­¤,IoCå®¹å™¨è¯ç”Ÿäº†.  
IoCå®¹å™¨å®é™…ä¸Šæ˜¯ä¸€ä¸ªDIæ¡†æ¶,å®ƒèƒ½ç®€åŒ–æˆ‘ä»¬çš„å·¥ä½œé‡.å®ƒåŒ…å«ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½:

+ åŠ¨æ€åˆ›å»ºã€æ³¨å…¥ä¾èµ–å¯¹è±¡.  
+ ç®¡ç†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ.
+ æ˜ å°„ä¾èµ–å…³ç³».  

æ¯”è¾ƒæµè¡Œçš„IoCå®¹å™¨æœ‰ä»¥ä¸‹å‡ ç§:

1. Ninject: [http://www.ninject.org/](http://www.ninject.org/)  

2. Castle Windsor: [http://www.castleproject.org/container/index.html](http://www.castleproject.org/container/index.html)  

3. Autofac: [http://code.google.com/p/autofac/](http://code.google.com/p/autofac/)  

4. StructureMap: [http://docs.structuremap.net/](http://docs.structuremap.net/)  

5. Unity: [http://unity.codeplex.com/](http://unity.codeplex.com/)  

6. Spring.NET: [http://www.springframework.net/](http://www.springframework.net/)

7. LightInject: [http://www.lightinject.net/](http://www.lightinject.net/)  

ä»¥Ninjectä¸ºä¾‹,æ¥å®ç°[æ–¹æ³•ä¸€æ„é€ å‡½æ•°æ³¨å…¥](###æ–¹æ³•ä¸€æ„é€ å‡½æ•°æ³¨å…¥)çš„åŠŸèƒ½.

é¦–å…ˆåœ¨é¡¹ç›®ä¸­æ·»åŠ Ninjectç¨‹åºé›†

```c#
using Ninject;
```

ç„¶å,IoCå®¹å™¨æ³¨å†Œç»‘å®šä¾èµ–:

```c#
StandardKernel kernel = new StandardKernel();

// æ³¨å†Œä¾èµ–
kernel.Bind<IPhone>().To<IPhone6>().
```

æ¥ä¸‹æ¥,æˆ‘ä»¬è·å–Userå¯¹è±¡(å·²ç»æ³¨å…¥äº†ä¾èµ–å¯¹è±¡)

```c#
User user = kernel.Get<User>();
```

æµ‹è¯•ä¸€ä¸‹

```c#
static void Main(string[] args)
{
    StandardKernel kernel = new StandardKernel();// åˆ›å»ºIocå®¹å™¨
    kernel.Bind<IPhone>().To<IPhone6>();// æ³¨å†Œä¾èµ–

    User user = kernel.Get<User>();// è·å–ç›®æ ‡å¯¹è±¡

    user.SendMessage();
    Console.Read();
}
```

## æ€»ç»“  

DIPæ˜¯è½¯ä»¶è®¾è®¡çš„ä¸€ç§æ€æƒ³,IoCåˆ™æ˜¯åŸºäºDIPè¡ç”Ÿå‡ºçš„ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼.  
DIæ˜¯IoCçš„å…·ä½“å®ç°æ–¹å¼ä¹‹ä¸€,ä½¿ç”¨æœ€ä¸ºå¹¿æ³›.  
IoCå®¹å™¨æ˜¯DIæ„é€ å‡½æ•°æ³¨å…¥çš„æ¡†æ¶,å®ƒç®¡ç†ç€ä¾èµ–é¡¹çš„ç”Ÿå‘½å‘¨æœŸåŠæ˜ å°„å…³ç³».