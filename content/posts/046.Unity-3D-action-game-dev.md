---
title: "ã€ŠUnity3DåŠ¨ä½œæ¸¸æˆå¼€å‘å®æˆ˜ã€‹"
date: 2021-09-05T16:26:31+08:00
draft: false
isCJKLanguage: true
---

## ç¬¬ä¸€ç« 

ç•¥

## ç¬¬äºŒç«  å‰æœŸå‡†å¤‡

#### 2.1.2 è‡ªå®šä¹‰çš„æ’å€¼å…¬å¼

ã€Šæ¸¸æˆç¼–ç¨‹ç²¾ç²¹1ã€‹ä¸€ä¹¦ä¸­æœ‰ä¸€èŠ‚å†…å®¹æ˜¯å…³äºæ’å€¼çš„ï¼Œä¹¦ä¸­å°†æ’å€¼åˆ†ä¸º

- æ•´å½¢
- æµ®ç‚¹æ•°çš„å¸§æ•°ç›¸å…³
- å¸§æ•°æ— å…³

å…¶ä¸­å¸§æ•°æ— å…³å¯ä»¥ç†è§£ä¸ºæ²¡æœ‰ä¸€ä¸ªæ—¶é—´é™åˆ¶ï¼Œåªéœ€è¦æä¾›ä¸€ä¸ªé€Ÿç‡å€¼å³å¯ã€‚ä½¿ç”¨Lerpå‡½æ•°åœ¨æ¯å¸§è¿›è¡Œæ’å€¼å°±å¯ä»¥å®ç°ç®€å•çš„å¸§é€Ÿæ— å…³ç¼“åŠ¨æ’å€¼ï¼š

```
x = Vector3.Lerp(x, y, dt)
```

åœ¨Updateä¸­æ¯å¸§å»è°ƒç”¨è¯¥æ’å€¼å‡½æ•°åï¼Œå³å¯å®ç°å¸§æ•°æ— å…³çš„EaseOutæ¬¢åŠ¨æ•ˆæœï¼š

![](https://raw.githubusercontent.com/lightjiao/lightjiao.github.io/develop/static/images/046/2.1.png)



> ğŸ’¡ å…³äºæ’å€¼å…¬å¼ï¼Œæ¨èä¸€ä¸ªç½‘ç«™ï¼š[https://easings.net/](https://easings.net/)
>
> æ’å€¼å¯ä»¥ç”¨æ¥åšåŠ¨ç”»ï¼Œä½†æ’å€¼ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œæœ‰äº›å¯¹è¡¨ç°æ•ˆæœè¦æ±‚å¤æ‚çš„åŠ¨ç”»ï¼Œè¿˜æ˜¯ç›´æ¥äº¤ç»™ç¾æœ¯åšåšAnimationæ¯”è¾ƒåˆé€‚

#### 2.1.3 æ¶ˆæ¯æ¨¡å—çš„è®¾è®¡

å»ºè®®çš„æ¶ˆæ¯ç®¡ç†å™¨ä»£ç å¦‚ä¸‹ï¼š
<details>
	<summary>Click to expand!</summary>
    ```
    using System;
    using System.Collections.Generic;

    public class MessageManager
    {
        static MessageManager mInstance;
    
    	//å•ä¾‹å¯¹è±¡
        public static MessageManager Instance
        {
            get
            {
                return mInstance ?? (mInstance = new MessageManager());
            }
        }
    
        Dictionary<string, Action<object[]>> mMessageDict = new Dictionary<string, Action<object[]>>(32);
    
        //åˆ†å‘æ¶ˆæ¯ç¼“å­˜å­—å…¸ï¼Œä¸»è¦åº”å¯¹æ¶ˆæ¯è¿˜æ²¡æ³¨å†Œä½†Dispatchå·²ç»è°ƒç”¨çš„æƒ…å†µ
        Dictionary<string, object[]> mDispatchCacheDict = new Dictionary<string, object[]>(16);
    
        private MessageManager() { }
    
        //è®¢é˜…æ¶ˆæ¯
        public void Subscribe(string message, Action<object[]> action)
        {
            Action<object[]> value = null;
            //å·²æœ‰æ¶ˆæ¯åˆ™è¿½åŠ ç»‘å®š
            if (mMessageDict.TryGetValue(message, out value))
            {
                value += action;
                mMessageDict[message] = value;
            }
            //æ²¡æœ‰æ¶ˆæ¯åˆ™æ·»åŠ åˆ°å­—å…¸é‡Œ
            else
            {
                mMessageDict.Add(message, action);
            }
        }
    
        //å–æ¶ˆæ¶ˆæ¯è®¢é˜…
        public void Unsubscribe(string message)
        {
            mMessageDict.Remove(message);
        }
    
        //åˆ†å‘æ¶ˆæ¯
        public void Dispatch(string message, object[] args = null, bool addToCache = false)
        {
            //ç¼“å­˜é’ˆå¯¹æ‰‹åŠ¨æ‹‰å–
            if (addToCache)
            {
                mDispatchCacheDict[message] = args;
            }
            //ä¸åŠ åˆ°ç¼“å­˜åˆ™å½“å‰è®¢é˜…æ¶ˆæ¯çš„å¯¹è±¡éƒ½ä¼šè¢«è§¦å‘
            else
            {
                Action<object[]> value = null;
                if (mMessageDict.TryGetValue(message, out value))
                    value(args);
            }
        }
    
        //å¤„ç†åˆ†å‘æ¶ˆæ¯ç¼“å­˜
        public void ProcessDispatchCache(string message)
        {
            object[] value = null;
            if (mDispatchCacheDict.TryGetValue(message, out value))
            {
                //å¦‚æœç¼“å­˜å­—å…¸é‡Œå­˜åœ¨è¯¥æ¶ˆæ¯åˆ™æ‰§è¡Œ
                Dispatch(message, value);
                mDispatchCacheDict.Remove(message);
            }
        }
    }
    ```
</details>

é™¤äº†ç®€å•çš„è®¢é˜…ã€å–æ¶ˆè®¢é˜…æ“ä½œä»¥å¤–ï¼Œè¿˜éœ€å¤„ç†å»¶è¿Ÿåˆ†å‘çš„æƒ…å†µã€‚å‡è®¾ç©å®¶åœ¨æ¸¸æˆä¸­è·å¾—æ–°è£…å¤‡åï¼Œç³»ç»Ÿåˆ™ä¼šå‘é€æ¶ˆæ¯é€šçŸ¥èƒŒåŒ…é¢å»æ˜¾ç¤ºç¬¬äºŒä¸ªé¡µç­¾ä¸Šçš„çº¢ç‚¹æ˜¾ç¤ºï¼Œä½†æ­¤æ—¶èƒŒåŒ…é¢æ¿å°šæœªåˆ›å»ºï¼Œå½“ç©å®¶æ‰“å¼€èƒŒåŒ…æ—¶æ¶ˆæ¯æ—©å°±å‘è¿‡äº†ã€‚è€Œå»¶è¿Ÿæ¶ˆæ¯å¯ä»¥å…ˆæŠŠæ¶ˆæ¯æ¨é€åˆ°ç¼“å­˜ä¸­ï¼Œç”±éœ€è¦æ‹‰å–å»¶è¿Ÿæ¶ˆæ¯çš„ç±»è‡ªè¡Œè°ƒç”¨æ‹‰å»å‡½æ•°å³å¯ã€‚

> ğŸ’¡ è¿™é‡Œçš„å»¶è¿Ÿæ¶ˆæ¯è®¢é˜…ä¾‹å­ï¼ŒæŠŠé€»è¾‘ä¸æ˜¾ç¤ºåˆ†å¼€ä¸å°±å¥½äº†ä¹ˆï¼ŸèƒŒåŒ…çš„é€»è¾‘ä¸€ç›´éƒ½åœ¨ï¼Œå“ªæ€•èƒŒåŒ…çš„UIæ²¡æœ‰æ‰“å¼€ï¼Œä½†åŒæ ·å¯ä»¥è®¾ç½®ä¸€ä¸ªéœ€è¦æ˜¾ç¤ºçº¢ç‚¹çš„é€»è¾‘



## ç¬¬äºŒç« 

#### 3.1.3 RigidBodyå‚æ•°ç®€ä»‹

- `Is Kinematic`ï¼šå¼€å¯æ­¤é€‰é¡¹åç‰©ä½“ä¸ä¼šå—åˆ°ç‰©ç†ç‰¹æ€§çš„å½±å“ã€‚
- `Interpolate`:æ’å€¼æ–¹å¼ï¼Œ`Interpolate`å†…æ’å€¼ä¼šè½ååè¾¹ä¸€äº›ï¼Œä½†æ¯”å¤–æ’å€¼å¹³æ»‘ã€‚`Extrapolate`å¤–æ’å€¼ä¼šåŸºäºé€Ÿåº¦é¢„æµ‹åˆšä½“ä½ç½®ï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´æŸä¸€å¸§å‡ºç°é”™è¯¯é¢„åˆ¤ã€‚å¯¹äºéœ€è¦ç‰©ç†è¡¨ç°å¾—ç‰©ä½“ï¼Œå»ºè®®é€‰æ‹©å†…æ’å€¼ã€‚
- `Collision Dection`ï¼šç¢°æ’æ£€æµ‹æ–¹å¼ï¼Œè®¾ç½®ä¸º`Continuous`è¿ç»­ï¼Œè¿™æ ·å½“è¿‡å¿«ç§»åŠ¨æ—¶èƒ½é˜²æ­¢ç©¿å¢™ï¼›å¯¹äºæ¬¡è¦çš„ç‰©ä½“ï¼Œæ¯”å¦‚ä¸€äº›ç‰¹æ•ˆç”Ÿæˆç‰©ï¼Œå»ºè®®è®¾ç½®ä¸º`ContinuousDynamic`æˆ–è€…`ContinuousSpeculative`ä»¥æé«˜æ€§èƒ½

> ğŸ’¡ é™„å®˜ç½‘ä»‹ç»ï¼šhttps://docs.unity3d.com/ScriptReference/Rigidbody-collisionDetectionMode.html
>
> å…³äºç‰©ç†æ–¹é¢å¾—è®¾ç½®â€¦â€¦æœ‰ç‚¹äº‘é‡Œé›¾é‡Œ



### 3.2 å¸¸è§é—®é¢˜

#### 3.2.4 Dashä¸ç¬ç§»çš„ä¼˜åŒ–

> ğŸ’¡ æœ¬è´¨ä¸Šéƒ½æ˜¯ç”¨å°„çº¿æ£€æµ‹ï¼Œåªä¸è¿‡ç”¨äº†ä¸åŒçš„API

`RigidBody.SweepTest()`æ‰«ææµ‹è¯•æ£€æµ‹ä¸€å®šè·ç¦»å†…ç‰©ä½“æ˜¯å¦ä¸å…¶ä»–ç¢°æ’å™¨äº§ç”Ÿäº¤äº’ã€‚

#### 3.2.5 è¸©å¤´é—®é¢˜åŠè§£å†³æ–¹æ³•

æ¸¸æˆå¼€å‘ä¸­å¸¸ä¼šé‡åˆ°è§’è‰²è·³åˆ°æ•Œäººå¤´ä¸Šæˆ–å…³å¡ç‰©ä½“ä¸Šé¢ä¹‹ç±»å¾—é—®é¢˜ã€‚å¯¹äºå…³å¡é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æ‹‰é«˜å®ƒä»¬å¾—å‚ç›´ç¢°æ’ï¼Œä½¿å¾—è§’è‰²æ— æ³•è§¦é¡¶ï¼›

è€Œå¯¹äºæ•Œäººæˆ–NPCä¹‹ç±»ï¼Œæˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä¸ªè™šæ‹Ÿçš„é”¥å½¢ç¢°æ’å™¨ï¼Œå½“è§’è‰²è·³åˆ°æ•Œäººå¤´é¡¶ä¸Šåä¼šè‡ªç„¶æ»‘è½ã€‚

åˆ¤æ–­è¢«æ£€æµ‹ç‰©ä½“æ˜¯å¦è¢«é”¥å½¢åŒ…å«ï¼Œå³å¯è¿›è¡Œä½ç½®ä¿®æ­£â€”â€”ä½¿å…¶æ»‘è½ã€‚

#### 3.2.6 åŠ¨ç”»æ ¹è¿åŠ¨çš„ç‰©ç†é—®é¢˜

RootMotionæ‰“å¼€åå¯¹ç‰©ä½“é€Ÿç‡è¿›è¡Œä¿®æ”¹åˆ™ä¸èµ·ä½œç”¨ï¼Œåœ¨Updateä¸­ä¿®æ”¹ä¹Ÿåªä¼šç”Ÿæ•ˆä¸€å¸§

æ¯”å¦‚æˆ‘ä»¬æƒ³è¦è®©è§’è‰²å—å‡»åæ»‘åŠ¨ä¸€æ®µè·ç¦»ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Updateä¸­æŠŠRootMotionå…³é—­ï¼Œè®¾ç½®è·ç¦»ï¼Œç»“æŸåå†æŠŠRootMotionå…³é—­

