---
title: "ã€ŠUnity3DåŠ¨ä½œæ¸¸æˆå¼€å‘å®æˆ˜ã€‹"
date: 2021-09-05T16:26:31+08:00
draft: false
isCJKLanguage: true
---

## ç¬¬ä¸€ç« 

ç•¥

## ç¬¬äºŒç«  å‰æœŸå‡†å¤‡

#### 2.1.2 è‡ªå®šä¹‰çš„æ’å€¼å…¬å¼

ã€Šæ¸¸æˆç¼–ç¨‹ç²¾ç²¹1ã€‹ä¸€ä¹¦ä¸­æœ‰ä¸€èŠ‚å†…å®¹æ˜¯å…³äºæ’å€¼çš„ï¼Œä¹¦ä¸­å°†æ’å€¼åˆ†ä¸º

- æ•´å½¢
- æµ®ç‚¹æ•°çš„å¸§æ•°ç›¸å…³
- å¸§æ•°æ— å…³

å…¶ä¸­å¸§æ•°æ— å…³å¯ä»¥ç†è§£ä¸ºæ²¡æœ‰ä¸€ä¸ªæ—¶é—´é™åˆ¶ï¼Œåªéœ€è¦æä¾›ä¸€ä¸ªé€Ÿç‡å€¼å³å¯ã€‚ä½¿ç”¨Lerpå‡½æ•°åœ¨æ¯å¸§è¿›è¡Œæ’å€¼å°±å¯ä»¥å®ç°ç®€å•çš„å¸§é€Ÿæ— å…³ç¼“åŠ¨æ’å€¼ï¼š

```
x = Vector3.Lerp(x, y, dt)
```

åœ¨Updateä¸­æ¯å¸§å»è°ƒç”¨è¯¥æ’å€¼å‡½æ•°åï¼Œå³å¯å®ç°å¸§æ•°æ— å…³çš„EaseOutæ¬¢åŠ¨æ•ˆæœï¼š

![](https://raw.githubusercontent.com/lightjiao/lightjiao.github.io/develop/static/images/046/2.1.jpg)



> ğŸ’¡ å…³äºæ’å€¼å…¬å¼ï¼Œæ¨èä¸€ä¸ªç½‘ç«™ï¼šhttps://easings.net/
>
> æ’å€¼å¯ä»¥ç”¨æ¥åšåŠ¨ç”»ï¼Œä½†æ’å€¼ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œæœ‰äº›å¯¹è¡¨ç°æ•ˆæœè¦æ±‚å¤æ‚çš„åŠ¨ç”»ï¼Œè¿˜æ˜¯ç›´æ¥äº¤ç»™ç¾æœ¯åšåšAnimationæ¯”è¾ƒåˆé€‚

#### 2.1.3 æ¶ˆæ¯æ¨¡å—çš„è®¾è®¡

å»ºè®®çš„æ¶ˆæ¯ç®¡ç†å™¨ä»£ç å¦‚ä¸‹ï¼š

```
using System;
using System.Collections.Generic;

public class MessageManager
{
    static MessageManager mInstance;

    //å•ä¾‹å¯¹è±¡
    public static MessageManager Instance
    {
        get
        {
            return mInstance ?? (mInstance = new MessageManager());
        }
    }

    Dictionary<string, Action<object[]>> mMessageDict = new Dictionary<string, Action<object[]>>(32);

    //åˆ†å‘æ¶ˆæ¯ç¼“å­˜å­—å…¸ï¼Œä¸»è¦åº”å¯¹æ¶ˆæ¯è¿˜æ²¡æ³¨å†Œä½†Dispatchå·²ç»è°ƒç”¨çš„æƒ…å†µ
    Dictionary<string, object[]> mDispatchCacheDict = new Dictionary<string, object[]>(16);

    private MessageManager() { }

    //è®¢é˜…æ¶ˆæ¯
    public void Subscribe(string message, Action<object[]> action)
    {
        Action<object[]> value = null;
        //å·²æœ‰æ¶ˆæ¯åˆ™è¿½åŠ ç»‘å®š
        if (mMessageDict.TryGetValue(message, out value))
        {
            value += action;
            mMessageDict[message] = value;
        }
        //æ²¡æœ‰æ¶ˆæ¯åˆ™æ·»åŠ åˆ°å­—å…¸é‡Œ
        else
        {
            mMessageDict.Add(message, action);
        }
    }

    //å–æ¶ˆæ¶ˆæ¯è®¢é˜…
    public void Unsubscribe(string message)
    {
        mMessageDict.Remove(message);
    }

    //åˆ†å‘æ¶ˆæ¯
    public void Dispatch(string message, object[] args = null, bool addToCache = false)
    {
        //ç¼“å­˜é’ˆå¯¹æ‰‹åŠ¨æ‹‰å–
        if (addToCache)
        {
            mDispatchCacheDict[message] = args;
        }
        //ä¸åŠ åˆ°ç¼“å­˜åˆ™å½“å‰è®¢é˜…æ¶ˆæ¯çš„å¯¹è±¡éƒ½ä¼šè¢«è§¦å‘
        else
        {
            Action<object[]> value = null;
            if (mMessageDict.TryGetValue(message, out value))
                value(args);
        }
    }

    //å¤„ç†åˆ†å‘æ¶ˆæ¯ç¼“å­˜
    public void ProcessDispatchCache(string message)
    {
        object[] value = null;
        if (mDispatchCacheDict.TryGetValue(message, out value))
        {
            //å¦‚æœç¼“å­˜å­—å…¸é‡Œå­˜åœ¨è¯¥æ¶ˆæ¯åˆ™æ‰§è¡Œ
            Dispatch(message, value);
            mDispatchCacheDict.Remove(message);
        }
    }
}
```

é™¤äº†ç®€å•çš„è®¢é˜…ã€å–æ¶ˆè®¢é˜…æ“ä½œä»¥å¤–ï¼Œè¿˜éœ€å¤„ç†å»¶è¿Ÿåˆ†å‘çš„æƒ…å†µã€‚å‡è®¾ç©å®¶åœ¨æ¸¸æˆä¸­è·å¾—æ–°è£…å¤‡åï¼Œç³»ç»Ÿåˆ™ä¼šå‘é€æ¶ˆæ¯é€šçŸ¥èƒŒåŒ…é¢å»æ˜¾ç¤ºç¬¬äºŒä¸ªé¡µç­¾ä¸Šçš„çº¢ç‚¹æ˜¾ç¤ºï¼Œä½†æ­¤æ—¶èƒŒåŒ…é¢æ¿å°šæœªåˆ›å»ºï¼Œå½“ç©å®¶æ‰“å¼€èƒŒåŒ…æ—¶æ¶ˆæ¯æ—©å°±å‘è¿‡äº†ã€‚è€Œå»¶è¿Ÿæ¶ˆæ¯å¯ä»¥å…ˆæŠŠæ¶ˆæ¯æ¨é€åˆ°ç¼“å­˜ä¸­ï¼Œç”±éœ€è¦æ‹‰å–å»¶è¿Ÿæ¶ˆæ¯çš„ç±»è‡ªè¡Œè°ƒç”¨æ‹‰å»å‡½æ•°å³å¯ã€‚

> ğŸ’¡ è¿™é‡Œçš„å»¶è¿Ÿæ¶ˆæ¯è®¢é˜…ä¾‹å­ï¼ŒæŠŠé€»è¾‘ä¸æ˜¾ç¤ºåˆ†å¼€ä¸å°±å¥½äº†ä¹ˆï¼ŸèƒŒåŒ…çš„é€»è¾‘ä¸€ç›´éƒ½åœ¨ï¼Œå“ªæ€•èƒŒåŒ…çš„UIæ²¡æœ‰æ‰“å¼€ï¼Œä½†åŒæ ·å¯ä»¥è®¾ç½®ä¸€ä¸ªéœ€è¦æ˜¾ç¤ºçº¢ç‚¹çš„é€»è¾‘





